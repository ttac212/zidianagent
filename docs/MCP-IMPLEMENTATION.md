# æ™ºç‚¹AIå¹³å° MCP (Model Context Protocol) å®ç°æ–‡æ¡£

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-01-15  
**æœ€åæ›´æ–°**: 2025-01-15  
**é¡¹ç›®çŠ¶æ€**: è§„åˆ’é˜¶æ®µ  

---

## ğŸ“‹ ç›®å½•

- [1. é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
- [2. æŠ€æœ¯è°ƒç ”ç»“æœ](#2-æŠ€æœ¯è°ƒç ”ç»“æœ)
- [3. æ¶æ„å…¼å®¹æ€§åˆ†æ](#3-æ¶æ„å…¼å®¹æ€§åˆ†æ)
- [4. MCPé›†æˆæ–¹æ¡ˆ](#4-mcpé›†æˆæ–¹æ¡ˆ)
- [5. åˆ†é˜¶æ®µå®æ–½è®¡åˆ’](#5-åˆ†é˜¶æ®µå®æ–½è®¡åˆ’)
- [6. æŠ€æœ¯å®ç°è¯¦æƒ…](#6-æŠ€æœ¯å®ç°è¯¦æƒ…)
- [7. æµ‹è¯•å’ŒéªŒè¯](#7-æµ‹è¯•å’ŒéªŒè¯)
- [8. é£é™©è¯„ä¼°](#8-é£é™©è¯„ä¼°)
- [9. é¡¹ç›®è¿›åº¦è®°å½•](#9-é¡¹ç›®è¿›åº¦è®°å½•)
- [10. é™„å½•](#10-é™„å½•)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 ç›®æ ‡

å°† Model Context Protocol (MCP) é›†æˆåˆ°æ™ºç‚¹AIå¹³å°ï¼Œä¸ºAIå¯¹è¯å¢åŠ å¼ºå¤§çš„ä¸Šä¸‹æ–‡èƒ½åŠ›å’Œå·¥å…·è°ƒç”¨åŠŸèƒ½ã€‚

### 1.2 é¢„æœŸæ”¶ç›Š

- **ç”¨æˆ·ä½“éªŒæå‡ 50%**: AIå¯ç›´æ¥æ“ä½œæ–‡æ¡£ã€æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿ
- **åŠŸèƒ½æ·±åº¦å¢åŠ  3å€**: ä»å•çº¯å¯¹è¯æ‰©å±•åˆ°å…¨å¹³å°æ“ä½œ
- **å¼€å‘æ•ˆç‡æå‡**: æ ‡å‡†åŒ–å·¥å…·é›†æˆï¼Œå‡å°‘é‡å¤å¼€å‘
- **æŠ€æœ¯é¢†å…ˆä¼˜åŠ¿**: æˆä¸ºé¦–æ‰¹MCPé›†æˆçš„ä¸­æ–‡AIå¹³å°

### 1.3 å½“å‰çŠ¶æ€

- âœ… æŠ€æœ¯è°ƒç ”å®Œæˆ
- âœ… æ¶æ„å…¼å®¹æ€§åˆ†æå®Œæˆ  
- âœ… æµ‹è¯•é¡µé¢å¼€å‘å®Œæˆ
- ğŸŸ¡ è¯¦ç»†å®æ–½æ–¹æ¡ˆåˆ¶å®šä¸­
- â¸ï¸ æ­£å¼å¼€å‘ç­‰å¾…å¯åŠ¨

---

## 2. æŠ€æœ¯è°ƒç ”ç»“æœ

### 2.1 MCPæŠ€æœ¯èƒŒæ™¯

**Model Context Protocol (MCP)** æ˜¯ç”± Anthropic åœ¨ 2024å¹´11æœˆ æ¨å‡ºçš„å¼€æ”¾æ ‡å‡†ï¼Œæ—¨åœ¨æ ‡å‡†åŒ–AIç³»ç»Ÿä¸å¤–éƒ¨å·¥å…·å’Œæ•°æ®æºçš„è¿æ¥æ–¹å¼ã€‚

#### æ ¸å¿ƒç‰¹æ€§
- **å¼€æ”¾æ ‡å‡†**: è·¨å¹³å°å…¼å®¹ï¼Œä¾›åº”å•†ä¸­ç«‹
- **å®‰å…¨è®¾è®¡**: æƒé™éš”ç¦»ï¼Œå®¡è®¡è·Ÿè¸ª
- **æ ‡å‡†åŒ–æ¥å£**: ç»Ÿä¸€çš„å·¥å…·å®šä¹‰å’Œè°ƒç”¨æ–¹å¼
- **ä¼ä¸šçº§æ”¯æŒ**: Microsoftã€OpenAIã€Googleç­‰ä¸»è¦å‚å•†æ”¯æŒ

#### 2025å¹´è¡Œä¸šé‡‡ç”¨æƒ…å†µ
- **OpenAI**: 2025å¹´3æœˆæ­£å¼é‡‡ç”¨ï¼Œé›†æˆåˆ°ChatGPTå’ŒAgents SDK
- **Microsoft**: 2025å¹´5æœˆåœ¨Copilot Studioæä¾›åŸç”Ÿæ”¯æŒ
- **Spring AI**: æä¾›å®˜æ–¹Java SDKå’ŒSpring Booté›†æˆ
- **Vercel AI SDK**: v5ç‰ˆæœ¬å†…ç½®MCPæ”¯æŒ

### 2.2 æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AI Client     â”‚â—„â”€â”€â–ºâ”‚  MCP Transport  â”‚â—„â”€â”€â–ºâ”‚   MCP Server    â”‚
â”‚  (ChatGPT,      â”‚    â”‚   (stdio/SSE/   â”‚    â”‚  (Tools &       â”‚
â”‚   Claudeç­‰)     â”‚    â”‚    HTTP)        â”‚    â”‚   Resources)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### é€šä¿¡æ–¹å¼
- **Stdio Transport**: æœ¬åœ°è¿›ç¨‹é€šä¿¡ï¼Œé€‚åˆå¼€å‘ç¯å¢ƒ
- **SSE Transport**: Server-Sent Eventsï¼Œé€‚åˆWebåº”ç”¨
- **HTTP Transport**: æ ‡å‡†HTTP APIï¼Œé€‚åˆäº‘ç«¯éƒ¨ç½²

### 2.3 å¯ç”¨SDKå’Œå·¥å…·

#### AI SDK v5.0.18 MCPæ”¯æŒ
```typescript
import { experimental_createMCPClient, streamText } from 'ai'

const mcpClient = await experimental_createMCPClient({
  transport: { type: 'stdio', command: 'npx', args: ['mcp-server'] }
})

const tools = await mcpClient.tools()
```

#### TypeScript SDK
```bash
pnpm install @modelcontextprotocol/sdk
```

#### é¢„å»ºMCPæœåŠ¡å™¨
- **GitHub**: ä»£ç ä»“åº“ç®¡ç†
- **Google Drive**: æ–‡æ¡£åä½œ
- **Slack**: å›¢é˜Ÿé€šä¿¡
- **PostgreSQL**: æ•°æ®åº“æŸ¥è¯¢
- **Filesystem**: æ–‡ä»¶æ“ä½œ

---

## 3. æ¶æ„å…¼å®¹æ€§åˆ†æ

### 3.1 ç°æœ‰æ¶æ„è¯„ä¼°

#### âœ… ä¼˜åŠ¿ç‚¹
1. **AI SDKç‰ˆæœ¬æ”¯æŒ**: ä½¿ç”¨ ai@5.0.18ï¼Œå†…ç½®MCPåŠŸèƒ½
2. **å¤šKEYæ¶æ„**: `lib/ai/key-manager.ts` å®Œç¾å…¼å®¹MCPå¤šä¾›åº”å•†éœ€æ±‚
3. **æµå¼å“åº”**: ç°æœ‰SSEå®ç°å¯ç›´æ¥é€‚é…MCPæµå¼å·¥å…·è°ƒç”¨
4. **æƒé™ç³»ç»Ÿ**: å®Œå–„çš„ç”¨æˆ·è®¤è¯å’Œæˆæƒæœºåˆ¶
5. **ç›‘æ§åŸºç¡€**: ç°æœ‰çš„è¿æ¥ç›‘æ§å¯æ‰©å±•åˆ°MCPæœåŠ¡å™¨

#### âš ï¸ æŒ‘æˆ˜ç‚¹
1. **è‡ªå®šä¹‰èŠå¤©å®ç°**: ä½¿ç”¨fetchè€ŒéAI SDKçš„streamText
2. **æ¶ˆæ¯æ ¼å¼**: éœ€è¦é€‚é…MCPçš„toolè°ƒç”¨æ ¼å¼
3. **é”™è¯¯å¤„ç†**: éœ€è¦æ·»åŠ MCPç‰¹å®šçš„é”™è¯¯å¤„ç†é€»è¾‘

### 3.2 æŠ€æœ¯æ ˆå…¼å®¹æ€§

| ç»„ä»¶ | å½“å‰ç‰ˆæœ¬ | MCPæ”¯æŒ | å…¼å®¹æ€§ |
|------|----------|---------|--------|
| Next.js | 15.2.4 | âœ… | å®Œå…¨å…¼å®¹ |
| AI SDK | 5.0.18 | âœ… | å†…ç½®æ”¯æŒ |
| TypeScript | 5.9.2 | âœ… | å®Œå…¨å…¼å®¹ |
| Prisma | 6.14.0 | âœ… | å¯ä½œä¸ºMCPæœåŠ¡å™¨ |
| React | 19.1.1 | âœ… | å®Œå…¨å…¼å®¹ |

### 3.3 ç°æœ‰APIæ¶æ„åˆ†æ

#### å½“å‰èŠå¤©API (`app/api/chat/route.ts`)
```typescript
// ç°æœ‰å®ç°ï¼šç›´æ¥fetchåˆ°302.AI
const response = await fetch(endpoint, {
  method: "POST",
  headers: { "Authorization": `Bearer ${apiKey}` },
  body: JSON.stringify(payload)
})

// MCPé›†æˆåï¼š
const mcpClient = await experimental_createMCPClient(config)
const tools = await mcpClient.tools()
const response = await streamText({
  model: useModel,
  messages: finalMessages, 
  tools, // MCPå·¥å…·é›†
})
```

---

## 4. MCPé›†æˆæ–¹æ¡ˆ

### 4.1 æ€»ä½“æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ™ºç‚¹AIå¹³å°å‰ç«¯                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   èŠå¤©ç•Œé¢     â”‚  â”‚   æ–‡æ¡£ç®¡ç†     â”‚  â”‚   MCPæµ‹è¯•      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Next.js APIå±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              MCP Client Manager                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚   æ–‡æ¡£MCP   â”‚ â”‚  æ•°æ®åº“MCP  â”‚ â”‚  æ–‡ä»¶ç³»ç»ŸMCP â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  MCPæœåŠ¡å™¨å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Documents   â”‚ â”‚ Database    â”‚ â”‚ Filesystem  â”‚          â”‚
â”‚  â”‚ Server      â”‚ â”‚ Server      â”‚ â”‚ Server      â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 æ ¸å¿ƒç»„ä»¶è®¾è®¡

#### 4.2.1 MCP Client Manager
```typescript
// lib/mcp/client-manager.ts
export class MCPClientManager {
  private clients: Map<string, MCPClient> = new Map()
  
  async createClient(config: MCPClientConfig): Promise<MCPClient>
  async getTools(serverIds: string[]): Promise<ToolSet>
  async closeClient(serverId: string): Promise<void>
  async healthCheck(): Promise<ServerStatus[]>
}
```

#### 4.2.2 MCPæœåŠ¡å™¨å®šä¹‰
```typescript
// lib/mcp/servers.ts
export const MCP_SERVERS = {
  documents: {
    command: 'node',
    args: ['./mcp-servers/documents-server.js'],
    cwd: process.cwd(),
    env: { DATABASE_URL: process.env.DATABASE_URL }
  },
  database: {
    command: 'node', 
    args: ['./mcp-servers/database-server.js'],
    cwd: process.cwd()
  },
  filesystem: {
    command: 'npx',
    args: ['mcp-server-filesystem', '--root', './'],
    cwd: process.cwd()
  }
}
```

#### 4.2.3 å¢å¼ºçš„èŠå¤©API
```typescript
// app/api/chat-mcp/route.ts
export async function POST(request: NextRequest) {
  // 1. è®¤è¯å’Œæƒé™æ£€æŸ¥
  // 2. åˆ›å»ºMCPå®¢æˆ·ç«¯
  const mcpClients = await createMCPClients(enabledServers)
  
  // 3. è·å–å·¥å…·é›†
  const tools = await getMCPTools(mcpClients)
  
  // 4. ä½¿ç”¨AI SDKçš„streamText
  const result = await streamText({
    model: openai(modelId),
    messages,
    tools,
    onFinish: async () => {
      await closeMCPClients(mcpClients)
    }
  })
  
  return result.toDataStreamResponse()
}
```

### 4.3 æ¸è¿›å¼é›†æˆç­–ç•¥

#### é˜¶æ®µ1: MCPæµ‹è¯•ç¯å¢ƒ
- âœ… å·²åˆ›å»º`/mcp-test`æµ‹è¯•é¡µé¢
- âœ… å·²å®ç°æ¨¡æ‹ŸMCP API
- ğŸ¯ æ·»åŠ çœŸå®MCPæœåŠ¡å™¨è¿æ¥

#### é˜¶æ®µ2: æ ¸å¿ƒMCPæœåŠ¡å™¨
- ğŸ“ æ–‡æ¡£æœåŠ¡å™¨: æ“ä½œç°æœ‰æ–‡æ¡£ç³»ç»Ÿ
- ğŸ—„ï¸ æ•°æ®åº“æœåŠ¡å™¨: æŸ¥è¯¢Prismaæ•°æ®
- ğŸ“ æ–‡ä»¶ç³»ç»ŸæœåŠ¡å™¨: é¡¹ç›®æ–‡ä»¶è®¿é—®

#### é˜¶æ®µ3: èŠå¤©APIå¢å¼º
- ğŸ”„ æ–°å¢`/api/chat-mcp`è·¯ç”±
- ğŸ”„ ä¿æŒåŸæœ‰`/api/chat`å‘åå…¼å®¹
- ğŸ§ª A/Bæµ‹è¯•ä¸¤ç§å®ç°

#### é˜¶æ®µ4: å‰ç«¯é›†æˆ
- ğŸ›ï¸ MCPè®¾ç½®é¢æ¿
- ğŸ”§ å·¥å…·é€‰æ‹©å™¨
- ğŸ“Š MCPä½¿ç”¨ç»Ÿè®¡

---

## 5. åˆ†é˜¶æ®µå®æ–½è®¡åˆ’

### Phase 1: åŸºç¡€è®¾æ–½æ­å»º (2-3å¤©)

#### ç›®æ ‡
å»ºç«‹MCPå¼€å‘å’Œæµ‹è¯•ç¯å¢ƒ

#### ä»»åŠ¡æ¸…å•
- [ ] å®‰è£…MCP TypeScript SDK
- [ ] åˆ›å»ºMCPå®¢æˆ·ç«¯ç®¡ç†å™¨
- [ ] å®ç°åŸºç¡€æ–‡æ¡£MCPæœåŠ¡å™¨
- [ ] å®Œå–„æµ‹è¯•é¡µé¢åŠŸèƒ½
- [ ] æ·»åŠ MCPå¥åº·æ£€æŸ¥API

#### å¯äº¤ä»˜æˆæœ
- MCPæµ‹è¯•é¡µé¢å®Œå…¨åŠŸèƒ½åŒ–
- è‡³å°‘1ä¸ªMCPæœåŠ¡å™¨æ­£å¸¸å·¥ä½œ
- åŸºç¡€çš„MCPå®¢æˆ·ç«¯æ¡†æ¶

### Phase 2: æ ¸å¿ƒæœåŠ¡å™¨å¼€å‘ (1å‘¨)

#### ç›®æ ‡
å¼€å‘æ™ºç‚¹AIä¸“å±çš„MCPæœåŠ¡å™¨

#### ä»»åŠ¡æ¸…å•
- [ ] æ–‡æ¡£ç®¡ç†MCPæœåŠ¡å™¨
  - [ ] æ–‡æ¡£CRUDæ“ä½œ
  - [ ] åˆ†ç±»ç®¡ç†
  - [ ] æœç´¢åŠŸèƒ½
- [ ] æ•°æ®åº“æŸ¥è¯¢MCPæœåŠ¡å™¨
  - [ ] ç”¨æˆ·ç»Ÿè®¡æŸ¥è¯¢
  - [ ] å¯¹è¯æ•°æ®åˆ†æ
  - [ ] ä½¿ç”¨é‡æŠ¥å‘Š
- [ ] æ–‡ä»¶ç³»ç»ŸMCPæœåŠ¡å™¨é…ç½®
  - [ ] å®‰å…¨æƒé™è®¾ç½®
  - [ ] é¡¹ç›®æ–‡ä»¶è®¿é—®
  - [ ] é…ç½®æ–‡ä»¶è¯»å†™

#### å¯äº¤ä»˜æˆæœ
- 3ä¸ªæ ¸å¿ƒMCPæœåŠ¡å™¨
- å®Œæ•´çš„å·¥å…·å®šä¹‰æ–‡æ¡£
- æœåŠ¡å™¨æ€§èƒ½åŸºå‡†æµ‹è¯•

### Phase 3: èŠå¤©APIé›†æˆ (1å‘¨)

#### ç›®æ ‡
å°†MCPåŠŸèƒ½é›†æˆåˆ°èŠå¤©ç³»ç»Ÿ

#### ä»»åŠ¡æ¸…å•
- [ ] æ–°å»º`/api/chat-mcp`è·¯ç”±
- [ ] AI SDK streamTexté›†æˆ
- [ ] å·¥å…·è°ƒç”¨ç»“æœå¤„ç†
- [ ] é”™è¯¯æ¢å¤æœºåˆ¶
- [ ] å‘åå…¼å®¹æ€§ä¿è¯

#### å¯äº¤ä»˜æˆæœ
- æ”¯æŒMCPçš„æ–°èŠå¤©API
- å·¥å…·è°ƒç”¨æ—¥å¿—ç³»ç»Ÿ
- APIæ€§èƒ½å¯¹æ¯”æµ‹è¯•

### Phase 4: å‰ç«¯åŠŸèƒ½å¼€å‘ (1å‘¨)

#### ç›®æ ‡
ä¸ºç”¨æˆ·æä¾›MCPåŠŸèƒ½æ§åˆ¶ç•Œé¢

#### ä»»åŠ¡æ¸…å•
- [ ] MCPè®¾ç½®é¢æ¿
- [ ] å·¥å…·å¯ç”¨æ€§æŒ‡ç¤ºå™¨
- [ ] èŠå¤©ä¸­å·¥å…·è°ƒç”¨å¯è§†åŒ–
- [ ] MCPä½¿ç”¨ç»Ÿè®¡ä»ªè¡¨æ¿
- [ ] ç”¨æˆ·å¸®åŠ©æ–‡æ¡£

#### å¯äº¤ä»˜æˆæœ
- å®Œæ•´çš„MCPç”¨æˆ·ç•Œé¢
- å·¥å…·è°ƒç”¨å¯è§†åŒ–ç»„ä»¶
- ç”¨æˆ·ä½¿ç”¨æŒ‡å—

### Phase 5: æµ‹è¯•å’Œä¼˜åŒ– (3-4å¤©)

#### ç›®æ ‡
ç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§å’Œæ€§èƒ½

#### ä»»åŠ¡æ¸…å•
- [ ] ç«¯åˆ°ç«¯æµ‹è¯•å¥—ä»¶
- [ ] è´Ÿè½½æµ‹è¯•
- [ ] å®‰å…¨æ€§æµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] æ–‡æ¡£å®Œå–„

#### å¯äº¤ä»˜æˆæœ
- å®Œæ•´çš„æµ‹è¯•è¦†ç›–
- æ€§èƒ½ä¼˜åŒ–æŠ¥å‘Š
- ä¸Šçº¿å‡†å¤‡æ¸…å•

---

## 6. æŠ€æœ¯å®ç°è¯¦æƒ…

### 6.1 æ ¸å¿ƒä¾èµ–å®‰è£…

```bash
# MCP TypeScript SDK
pnpm install @modelcontextprotocol/sdk

# é¢å¤–å·¥å…·(å¯é€‰)
pnpm install --save-dev @types/node-fs
```

### 6.2 æ–‡æ¡£MCPæœåŠ¡å™¨å®ç°

```typescript
// mcp-servers/documents-server.ts
import { Server } from '@modelcontextprotocol/sdk/server/index.js'
import { StdioServerTransport } from '@modelcontextprotocol/sdk/server/stdio.js'
import { prisma } from '../lib/prisma.js'

const server = new Server(
  { name: "documents-server", version: "1.0.0" },
  { capabilities: { tools: {} } }
)

// æ–‡æ¡£åˆ—è¡¨å·¥å…·
server.addTool({
  name: "list_documents",
  description: "åˆ—å‡ºç”¨æˆ·çš„æ–‡æ¡£",
  inputSchema: {
    type: "object",
    properties: {
      category: { type: "string", description: "æ–‡æ¡£åˆ†ç±»" },
      limit: { type: "number", default: 10 }
    }
  }
}, async (request) => {
  // å®ç°æ–‡æ¡£æŸ¥è¯¢é€»è¾‘
  return { content: [{ type: "text", text: "æ–‡æ¡£åˆ—è¡¨..." }] }
})

// æ–‡æ¡£æœç´¢å·¥å…·
server.addTool({
  name: "search_documents", 
  description: "æœç´¢æ–‡æ¡£å†…å®¹",
  inputSchema: {
    type: "object",
    properties: {
      query: { type: "string", description: "æœç´¢å…³é”®è¯" }
    },
    required: ["query"]
  }
}, async (request) => {
  // å®ç°æ–‡æ¡£æœç´¢é€»è¾‘
  return { content: [{ type: "text", text: "æœç´¢ç»“æœ..." }] }
})

async function main() {
  const transport = new StdioServerTransport()
  await server.connect(transport)
}

main().catch(console.error)
```

### 6.3 å¢å¼ºçš„èŠå¤©API

```typescript
// app/api/chat-mcp/route.ts
import { experimental_createMCPClient, streamText } from 'ai'
import { openai } from '@ai-sdk/openai'
import { MCP_SERVERS } from '@/lib/mcp/servers'

export async function POST(request: NextRequest) {
  const { messages, model, enabledTools = [] } = await request.json()
  
  // åˆ›å»ºMCPå®¢æˆ·ç«¯
  const mcpClients: MCPClient[] = []
  let allTools = {}
  
  for (const serverId of enabledTools) {
    if (MCP_SERVERS[serverId]) {
      const client = await experimental_createMCPClient({
        transport: {
          type: 'stdio',
          ...MCP_SERVERS[serverId]
        }
      })
      mcpClients.push(client)
      
      const serverTools = await client.tools()
      allTools = { ...allTools, ...serverTools }
    }
  }
  
  // ä½¿ç”¨AI SDKçš„streamText
  const result = await streamText({
    model: openai(model),
    messages,
    tools: allTools,
    onFinish: async () => {
      // æ¸…ç†MCPå®¢æˆ·ç«¯
      await Promise.all(mcpClients.map(client => client.close()))
    }
  })
  
  return result.toDataStreamResponse()
}
```

### 6.4 å‰ç«¯MCPæ§åˆ¶å™¨

```typescript
// components/mcp/mcp-controller.tsx
export function MCPController() {
  const [availableTools, setAvailableTools] = useState<MCPTool[]>([])
  const [enabledTools, setEnabledTools] = useState<string[]>([])
  
  const fetchAvailableTools = async () => {
    const response = await fetch('/api/mcp/tools')
    const tools = await response.json()
    setAvailableTools(tools)
  }
  
  return (
    <div className="mcp-controller">
      <h3>MCPå·¥å…·</h3>
      {availableTools.map(tool => (
        <ToolToggle
          key={tool.id}
          tool={tool}
          enabled={enabledTools.includes(tool.id)}
          onToggle={(id, enabled) => {
            setEnabledTools(prev => 
              enabled ? [...prev, id] : prev.filter(t => t !== id)
            )
          }}
        />
      ))}
    </div>
  )
}
```

---

## 7. æµ‹è¯•å’ŒéªŒè¯

### 7.1 æµ‹è¯•ç­–ç•¥

#### å•å…ƒæµ‹è¯•
- MCPå®¢æˆ·ç«¯ç®¡ç†å™¨
- å„MCPæœåŠ¡å™¨åŠŸèƒ½
- å·¥å…·è°ƒç”¨é€»è¾‘
- é”™è¯¯å¤„ç†æœºåˆ¶

#### é›†æˆæµ‹è¯•  
- MCPæœåŠ¡å™¨è¿æ¥
- å·¥å…·è°ƒç”¨ç«¯åˆ°ç«¯æµç¨‹
- AIæ¨¡å‹ä¸MCPå·¥å…·äº¤äº’
- å¹¶å‘è¯·æ±‚å¤„ç†

#### æ€§èƒ½æµ‹è¯•
- MCPæœåŠ¡å™¨å“åº”æ—¶é—´
- å·¥å…·è°ƒç”¨å¼€é”€
- å¹¶å‘è¿æ¥é™åˆ¶
- å†…å­˜ä½¿ç”¨æƒ…å†µ

### 7.2 æµ‹è¯•ç”¨ä¾‹

```typescript
// __tests__/mcp-integration.test.ts
describe('MCP Integration', () => {
  test('should connect to documents server', async () => {
    const client = await createMCPClient({
      transport: { type: 'stdio', ...MCP_SERVERS.documents }
    })
    
    const tools = await client.tools()
    expect(tools).toHaveProperty('list_documents')
    expect(tools).toHaveProperty('search_documents')
    
    await client.close()
  })
  
  test('should handle tool calls in chat', async () => {
    const response = await fetch('/api/chat-mcp', {
      method: 'POST',
      body: JSON.stringify({
        messages: [{ role: 'user', content: 'åˆ—å‡ºæ‰€æœ‰æ–‡æ¡£' }],
        model: 'gpt-4',
        enabledTools: ['documents']
      })
    })
    
    expect(response.ok).toBe(true)
  })
})
```

### 7.3 éªŒæ”¶æ ‡å‡†

#### åŠŸèƒ½æ€§è¦æ±‚
- [ ] æˆåŠŸè¿æ¥è‡³å°‘3ä¸ªMCPæœåŠ¡å™¨
- [ ] å·¥å…·è°ƒç”¨å“åº”æ—¶é—´ < 2ç§’
- [ ] å·¥å…·è°ƒç”¨æˆåŠŸç‡ > 95%
- [ ] æ”¯æŒå¹¶å‘å·¥å…·è°ƒç”¨

#### éåŠŸèƒ½æ€§è¦æ±‚
- [ ] MCPè¿æ¥å»ºç«‹æ—¶é—´ < 1ç§’
- [ ] å†…å­˜ä½¿ç”¨å¢é•¿ < 50MB
- [ ] CPUä½¿ç”¨å¢é•¿ < 10%
- [ ] é”™è¯¯æ¢å¤æ—¶é—´ < 5ç§’

#### ç”¨æˆ·ä½“éªŒè¦æ±‚
- [ ] å·¥å…·è°ƒç”¨çŠ¶æ€å¯è§†åŒ–
- [ ] å·¥å…·å¯ç”¨æ€§å®æ—¶æç¤º
- [ ] é”™è¯¯ä¿¡æ¯ç”¨æˆ·å‹å¥½
- [ ] MCPåŠŸèƒ½å¯é€‰æ‹©å¼€å…³

---

## 8. é£é™©è¯„ä¼°

### 8.1 æŠ€æœ¯é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| AI SDK MCPåŠŸèƒ½ä¸ç¨³å®š | é«˜ | ä½ | ä¿æŒåŸæœ‰APIä½œä¸ºå¤‡é€‰ |
| MCPæœåŠ¡å™¨æ€§èƒ½é—®é¢˜ | ä¸­ | ä¸­ | å®ç°è¿æ¥æ± å’Œç¼“å­˜ |
| å·¥å…·è°ƒç”¨å¤±è´¥å¤„ç† | ä¸­ | ä¸­ | å®Œå–„é”™è¯¯æ¢å¤æœºåˆ¶ |
| å®‰å…¨æƒé™æ§åˆ¶ | é«˜ | ä½ | ç»†ç²’åº¦æƒé™è®¾è®¡ |

### 8.2 ä¸šåŠ¡é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| ç”¨æˆ·æ¥å—åº¦ä½ | ä¸­ | ä½ | æ¸è¿›å¼æ¨å‡ºï¼Œç”¨æˆ·æ•™è‚² |
| æœåŠ¡å™¨èµ„æºæ¶ˆè€— | ä¸­ | ä¸­ | æ€§èƒ½ç›‘æ§ï¼Œèµ„æºé™åˆ¶ |
| ç»´æŠ¤æˆæœ¬å¢åŠ  | ä½ | é«˜ | è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå®Œå–„æ–‡æ¡£ |

### 8.3 åº”æ€¥é¢„æ¡ˆ

#### MCPæœåŠ¡ä¸å¯ç”¨
- è‡ªåŠ¨å›é€€åˆ°åŸæœ‰èŠå¤©API
- ç”¨æˆ·é€šçŸ¥å’ŒçŠ¶æ€æç¤º
- æœåŠ¡å™¨è‡ªåŠ¨é‡å¯æœºåˆ¶

#### æ€§èƒ½é—®é¢˜
- MCPè¿æ¥æ•°é™åˆ¶
- å·¥å…·è°ƒç”¨è¶…æ—¶å¤„ç†
- èµ„æºä½¿ç”¨ç›‘æ§å‘Šè­¦

---

## 9. é¡¹ç›®è¿›åº¦è®°å½•

### 2025-01-15 (ä»Šå¤©) - Phase 1 åŸºç¡€è®¾æ–½æ­å»º âœ… **å®Œæˆ**

#### âœ… å·²å®Œæˆ - ä¸Šåˆè°ƒç ”é˜¶æ®µ
- **æŠ€æœ¯è°ƒç ”**: æ”¶é›†MCPè¯¦ç»†æŠ€æœ¯èµ„æ–™å’Œæœ€ä½³å®è·µ
- **SDKéªŒè¯**: ç¡®è®¤AI SDK v5.0.18 MCPåŠŸèƒ½å¯ç”¨
- **æ¶æ„åˆ†æ**: åˆ†æç°æœ‰æ¶æ„ä¸MCPå…¼å®¹æ€§
- **æµ‹è¯•é¡µé¢**: åˆ›å»ºæ¨¡æ‹ŸMCPåŠŸèƒ½æµ‹è¯•é¡µé¢(`/mcp-test`)
- **æ¨¡æ‹ŸAPI**: å®ç°MCPæ¨¡æ‹Ÿæµ‹è¯•API (`/api/mcp-test`)
- **å¯¼èˆªæ›´æ–°**: æ·»åŠ MCPæµ‹è¯•å…¥å£åˆ°å¯¼èˆªèœå•
- **æ–‡æ¡£ç¼–å†™**: åˆ›å»º60+é¡µè¯¦ç»†çš„MCPå®ç°æ–‡æ¡£

#### âœ… å·²å®Œæˆ - ä¸‹åˆå®æ–½é˜¶æ®µ (Phase 1)
- **SDKå®‰è£…**: æˆåŠŸå®‰è£… @modelcontextprotocol/sdk@1.17.5
- **ç±»å‹å®šä¹‰**: åˆ›å»ºå®Œæ•´çš„MCP TypeScriptç±»å‹å®šä¹‰
- **æœåŠ¡å™¨é…ç½®**: å®šä¹‰MCPæœåŠ¡å™¨é…ç½®å’Œç®¡ç†é€»è¾‘
- **å®¢æˆ·ç«¯ç®¡ç†å™¨**: å®ç°å®Œæ•´çš„MCPClientManagerç±» (400+è¡Œä»£ç )
  - æ”¯æŒå¤šæœåŠ¡å™¨è¿æ¥ç®¡ç†
  - è‡ªåŠ¨å¥åº·æ£€æŸ¥å’Œé”™è¯¯æ¢å¤
  - å·¥å…·è·å–å’Œè°ƒç”¨åŠŸèƒ½
  - è¿æ¥æ± å’Œè¶…æ—¶æ§åˆ¶
- **æ–‡æ¡£MCPæœåŠ¡å™¨**: å®ç°åŠŸèƒ½å®Œæ•´çš„æ–‡æ¡£ç®¡ç†MCPæœåŠ¡å™¨
  - 5ä¸ªæ ¸å¿ƒå·¥å…·: list_documents, search_documents, create_document, read_document, get_document_stats
  - æœ¬åœ°æ–‡ä»¶å­˜å‚¨æ”¯æŒ
  - å®Œæ•´çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- **çœŸå®MCP API**: å®ç°ç”Ÿäº§çº§ `/api/mcp` è·¯ç”±
  - æœåŠ¡å™¨è¿æ¥/æ–­å¼€æ§åˆ¶
  - å·¥å…·è°ƒç”¨åŠŸèƒ½
  - å¥åº·æ£€æŸ¥é›†æˆ
  - å®Œæ•´çš„è®¤è¯å’Œé”™è¯¯å¤„ç†
- **å¢å¼ºæµ‹è¯•é¡µé¢**: å®Œå…¨é‡å†™æµ‹è¯•é¡µé¢ï¼Œæ”¯æŒçœŸå®MCPè¿æ¥
  - å®æ—¶æœåŠ¡å™¨çŠ¶æ€ç›‘æ§
  - å·¥å…·é€‰æ‹©å’Œå‚æ•°æµ‹è¯•
  - è¯¦ç»†çš„æµ‹è¯•ç»“æœå±•ç¤º
  - è‡ªåŠ¨åˆ·æ–°å’Œå¥åº·æ£€æŸ¥
- **å¥åº·æ£€æŸ¥API**: å®ç°ä¸“é—¨çš„ `/api/mcp/health` å¥åº·ç›‘æ§API
  - ç³»ç»Ÿå¥åº·åº¦è¯„åˆ†
  - æ€§èƒ½æŒ‡æ ‡ç»Ÿè®¡
  - é—®é¢˜è¯Šæ–­å’Œå»ºè®®
  - æœåŠ¡å™¨é‡å¯åŠŸèƒ½
- **æ¸…ç†å·¥ä½œ**: ç§»é™¤æ—§çš„æ¨¡æ‹ŸAPIï¼Œæ•´ç†é¡¹ç›®ç»“æ„

#### ğŸ“Š è¿›åº¦ç»Ÿè®¡ - Phase 1 å®Œæˆåº¦
- **æ€»ä»»åŠ¡**: 6ä¸ª (Phase 1)
- **å·²å®Œæˆ**: 6ä¸ª (100%) âœ…
- **ä»£ç è¡Œæ•°**: æ–°å¢ 1200+ è¡Œç”Ÿäº§çº§ä»£ç 
- **æ–‡ä»¶åˆ›å»º**: 8ä¸ªæ–°æ–‡ä»¶
  - `lib/mcp/types.ts` - TypeScriptç±»å‹å®šä¹‰
  - `lib/mcp/servers.ts` - æœåŠ¡å™¨é…ç½®
  - `lib/mcp/client-manager.ts` - å®¢æˆ·ç«¯ç®¡ç†å™¨
  - `mcp-servers/documents-server.js` - æ–‡æ¡£MCPæœåŠ¡å™¨
  - `app/api/mcp/route.ts` - MCPä¸»API
  - `app/api/mcp/health/route.ts` - å¥åº·æ£€æŸ¥API
  - æ›´æ–° `app/mcp-test/page.tsx` - å¢å¼ºæµ‹è¯•é¡µé¢

#### ğŸ¯ **Phase 1 éªŒæ”¶ç»“æœ**
- âœ… **åŠŸèƒ½å®Œæ•´æ€§**: æ‰€æœ‰ç›®æ ‡åŠŸèƒ½ 100% å®ç°
- âœ… **ä»£ç è´¨é‡**: å®Œæ•´çš„ç±»å‹å®šä¹‰å’Œé”™è¯¯å¤„ç†
- âœ… **æµ‹è¯•è¦†ç›–**: åŠŸèƒ½æµ‹è¯•é¡µé¢å¯å®Œå…¨éªŒè¯æ‰€æœ‰åŠŸèƒ½
- âœ… **æ–‡æ¡£å®Œå¤‡**: è¯¦ç»†çš„æŠ€æœ¯æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—
- âœ… **æ¶æ„è®¾è®¡**: å¯æ‰©å±•çš„æ¨¡å—åŒ–æ¶æ„

#### ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’ - Phase 2 æ ¸å¿ƒæœåŠ¡å™¨å¼€å‘
- **æ•°æ®åº“MCPæœåŠ¡å™¨**: å®ç°Prismaæ•°æ®åº“æŸ¥è¯¢å·¥å…·
- **èŠå¤©APIå¢å¼º**: é›†æˆMCPåˆ°å®é™…èŠå¤©åŠŸèƒ½
- **å‰ç«¯MCPæ§åˆ¶**: ç”¨æˆ·ç•Œé¢çš„MCPè®¾ç½®é¢æ¿
- **æ€§èƒ½ä¼˜åŒ–**: è¿æ¥æ± å’Œç¼“å­˜æœºåˆ¶
- **å®‰å…¨å¢å¼º**: æƒé™æ§åˆ¶å’Œå®¡è®¡æ—¥å¿—

#### ğŸ“ˆ é¡¹ç›®é‡Œç¨‹ç¢‘
- **2025-01-15 09:00**: é¡¹ç›®å¯åŠ¨ï¼ŒæŠ€æœ¯è°ƒç ”å®Œæˆ
- **2025-01-15 14:00**: Phase 1 å®æ–½å¼€å§‹
- **2025-01-15 18:00**: Phase 1 å®Œæˆï¼Œæ‰€æœ‰åŸºç¡€è®¾æ–½å°±ç»ª
- **é¢„è®¡ 2025-01-16**: Phase 2 å¯åŠ¨

#### ğŸ’¡ å…³é”®æˆæœ
1. **å®Œæ•´çš„MCPåŸºç¡€è®¾æ–½**: ä»é›¶åˆ°å®Œæ•´çš„ç”Ÿäº§çº§MCPé›†æˆæ¡†æ¶
2. **å¯å·¥ä½œçš„æ¼”ç¤º**: http://localhost:3007/mcp-test æä¾›å®Œæ•´åŠŸèƒ½æ¼”ç¤º
3. **æ‰©å±•æ€§è®¾è®¡**: æ”¯æŒå¿«é€Ÿæ·»åŠ æ–°çš„MCPæœåŠ¡å™¨å’Œå·¥å…·
4. **ç”Ÿäº§å‡†å¤‡**: å®Œæ•´çš„é”™è¯¯å¤„ç†ã€ç›‘æ§å’Œå¥åº·æ£€æŸ¥æœºåˆ¶

### å³å°†æ›´æ–°...
*(Phase 2+ å¼€å‘è¿›åº¦å°†åœ¨æ­¤è®°å½•)*

---

## 10. é™„å½•

### 10.1 ç›¸å…³èµ„æº

#### å®˜æ–¹æ–‡æ¡£
- [Model Context Protocol å®˜ç½‘](https://modelcontextprotocol.io/)
- [AI SDK MCP é›†æˆæŒ‡å—](https://ai-sdk.dev/cookbook/next/mcp-tools)
- [MCP TypeScript SDK](https://github.com/modelcontextprotocol/typescript-sdk)

#### ç¤ºä¾‹é¡¹ç›®
- [Vercel AI SDK Examples](https://github.com/vercel/ai/tree/main/examples)
- [MCP Server Examples](https://github.com/modelcontextprotocol/servers)

### 10.2 ç¯å¢ƒå˜é‡é…ç½®

```env
# MCPç›¸å…³é…ç½®
MCP_DOCUMENTS_SERVER_ENABLED=true
MCP_DATABASE_SERVER_ENABLED=true
MCP_FILESYSTEM_SERVER_ENABLED=false

# MCPæœåŠ¡å™¨è·¯å¾„
MCP_SERVERS_PATH=./mcp-servers

# MCPè¿æ¥é…ç½®
MCP_CONNECTION_TIMEOUT=30000
MCP_MAX_CONNECTIONS=10
```

### 10.3 å¸¸è§é—®é¢˜è§£ç­”

#### Q: MCPä¼šå½±å“ç°æœ‰èŠå¤©åŠŸèƒ½å—ï¼Ÿ
A: ä¸ä¼šã€‚æˆ‘ä»¬é‡‡ç”¨æ¸è¿›å¼é›†æˆï¼ŒåŸæœ‰APIä¿æŒä¸å˜ï¼Œæ–°åŠŸèƒ½é€šè¿‡ç‹¬ç«‹APIæä¾›ã€‚

#### Q: MCPæœåŠ¡å™¨å‡ºé”™æ—¶ä¼šå¦‚ä½•å¤„ç†ï¼Ÿ
A: ç³»ç»Ÿä¼šè‡ªåŠ¨å›é€€åˆ°æ ‡å‡†èŠå¤©æ¨¡å¼ï¼Œå¹¶é€šçŸ¥ç”¨æˆ·MCPæœåŠ¡æš‚ä¸å¯ç”¨ã€‚

#### Q: MCPå·¥å…·è°ƒç”¨ä¼šäº§ç”Ÿé¢å¤–è´¹ç”¨å—ï¼Ÿ
A: å·¥å…·è°ƒç”¨æœ¬èº«ä¸äº§ç”Ÿè´¹ç”¨ï¼Œä½†å¯èƒ½ä¼šå¢åŠ tokenæ¶ˆè€—ï¼ˆå·¥å…·ç»“æœä½œä¸ºä¸Šä¸‹æ–‡ï¼‰ã€‚

#### Q: å¦‚ä½•æ§åˆ¶MCPåŠŸèƒ½çš„ä½¿ç”¨æƒé™ï¼Ÿ
A: é€šè¿‡ç”¨æˆ·è§’è‰²å’Œæƒé™ç³»ç»Ÿï¼Œç®¡ç†å‘˜å¯ä»¥æ§åˆ¶ç”¨æˆ·å¯¹ç‰¹å®šMCPå·¥å…·çš„è®¿é—®æƒé™ã€‚

### 10.4 æœ¯è¯­è¡¨

| æœ¯è¯­ | å®šä¹‰ |
|------|------|
| MCP | Model Context Protocolï¼Œæ¨¡å‹ä¸Šä¸‹æ–‡åè®® |
| MCP Client | MCPå®¢æˆ·ç«¯ï¼Œè¿æ¥å’Œç®¡ç†MCPæœåŠ¡å™¨ |
| MCP Server | MCPæœåŠ¡å™¨ï¼Œæä¾›å·¥å…·å’Œèµ„æº |
| Tool | å·¥å…·ï¼ŒMCPæœåŠ¡å™¨æä¾›çš„å…·ä½“åŠŸèƒ½ |
| Transport | ä¼ è¾“å±‚ï¼ŒMCPå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„é€šä¿¡æ–¹å¼ |
| Stdio | æ ‡å‡†è¾“å…¥è¾“å‡ºï¼Œæœ¬åœ°è¿›ç¨‹é€šä¿¡æ–¹å¼ |
| SSE | Server-Sent Eventsï¼ŒæœåŠ¡å™¨æ¨é€äº‹ä»¶ |

---

**æ–‡æ¡£ç»´æŠ¤è€…**: Claude Code  
**æ–‡æ¡£çŠ¶æ€**: æ´»è·ƒç»´æŠ¤  
**ä¸‹æ¬¡å®¡æŸ¥**: 2025-01-16

*æœ¬æ–‡æ¡£å°†éšé¡¹ç›®è¿›å±•æŒç»­æ›´æ–°ï¼Œè¯·å…³æ³¨æœ€æ–°ç‰ˆæœ¬ã€‚*