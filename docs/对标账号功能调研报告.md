# 对标账号功能 - 调研报告

## 一、核心概念定义

### 什么是对标账号？

**对标账号(Benchmark Account)**是指用于对比分析、学习参考的目标账号,通常包括:
- 同行业竞品账号
- 成功的标杆案例
- 值得学习的内容创作者
- 潜在的签约目标

### 对标账号 vs 已签约商家

| 维度 | 已签约商家(Signed Merchant) | 对标账号(Benchmark Account) |
|------|---------------------------|---------------------------|
| **合作关系** | ✅ 已签约,有合同关系 | ❌ 未签约,仅作研究对象 |
| **业务目的** | 为其创作内容,服务客户 | 研究学习,寻找机会 |
| **数据来源** | 公开数据 + 可能的内部数据 | 仅公开数据(抖音等平台) |
| **管理需求** | 需要维护客户关系,定期更新档案 | 追踪观察,定期分析 |
| **数量规模** | 相对较少(10-100个) | 可能很多(100-1000+个) |
| **关联关系** | 独立存在 | 可能与已签约商家关联 |
| **权限要求** | ADMIN管理,创作者查看 | ADMIN管理,可公开查看 |
| **档案详细度** | 完整档案(AI生成 + 人工补充) | AI分析为主,简化档案 |

---

## 二、业务需求分析

### 核心使用场景

#### 场景1: 竞品研究
**角色**: 内容策划人员
**需求**:
- 添加竞品账号作为对标
- 查看竞品的爆款内容特征
- 分析竞品的创作策略
- 对比自家商家与竞品的差异

**示例**:
> "我们签约了一家美妆商家,需要添加3个头部美妆博主作为对标,分析他们的成功策略"

#### 场景2: 创作灵感
**角色**: 短视频创作者
**需求**:
- 浏览对标账号的创作档案
- 查看黄金3秒开头模板
- 学习成功的情绪点运用
- 参考热门话题和标签

**示例**:
> "为商家A创作脚本前,先看看关联的对标账号B和C是如何做的"

#### 场景3: 潜在客户管理
**角色**: 商务BD
**需求**:
- 将潜在客户先添加为对标账号
- 追踪其数据表现
- 评估签约价值
- 签约后转为已签约商家

**示例**:
> "发现了一个不错的本地餐饮账号,先加入对标账号池追踪一个月,数据好的话再谈签约"

#### 场景4: 行业洞察
**角色**: 运营总监
**需求**:
- 批量添加行业头部账号
- 分析行业内容趋势
- 识别新兴内容形式
- 调整整体创作方向

**示例**:
> "添加20个服装行业头部账号,分析2025年Q1的内容趋势"

---

## 三、功能需求清单

### 3.1 基础功能

| 功能 | 优先级 | 说明 |
|------|--------|------|
| 添加对标账号 | P0 | 手动添加抖音账号作为对标 |
| 查看对标列表 | P0 | 列表展示所有对标账号 |
| 对标账号详情 | P0 | 查看单个对标账号的详细信息 |
| 删除对标账号 | P0 | 移除不再需要的对标账号 |
| 生成对标档案 | P0 | AI生成对标账号的创作档案 |

### 3.2 关联功能

| 功能 | 优先级 | 说明 |
|------|--------|------|
| 关联已签约商家 | P0 | 将对标账号与某个商家关联 |
| 查看关联的对标 | P0 | 在商家详情页查看其关联的对标账号 |
| 批量关联 | P1 | 一次关联多个对标账号 |
| 解除关联 | P1 | 解除对标账号与商家的关联 |

### 3.3 分析功能

| 功能 | 优先级 | 说明 |
|------|--------|------|
| 对比分析 | P1 | 对比商家与对标账号的数据差异 |
| 趋势分析 | P1 | 分析对标账号的数据变化趋势 |
| 批量分析 | P2 | 批量分析多个对标账号的共性 |

### 3.4 转化功能

| 功能 | 优先级 | 说明 |
|------|--------|------|
| 转为已签约商家 | P1 | 对标账号签约后,转为已签约商家 |
| 标记跟进状态 | P2 | 标记对标账号的跟进状态(关注/洽谈/放弃) |

---

## 四、数据库设计方案

### 方案对比

#### 方案A: 统一Merchant表(推荐)

**优点**:
- ✅ 数据结构统一,避免重复
- ✅ 代码复用度高
- ✅ 转化流程简单(只需修改status字段)
- ✅ 查询和统计方便

**缺点**:
- ⚠️ 某些字段可能仅适用于一种类型
- ⚠️ 需要通过status字段区分

**实现**:
```prisma
model Merchant {
  // ... 现有字段

  // 新增字段
  status           MerchantStatus @default(SIGNED)  // SIGNED | BENCHMARK
  benchmarkNotes   String?        // 对标备注(仅对标账号使用)
  followUpStatus   String?        // 跟进状态: WATCHING | CONTACTING | DROPPED

  // 对标关联关系
  benchmarkForId   String?        // 作为对标账号时,关联的商家ID
  benchmarkFor     Merchant?      @relation("BenchmarkRelation", fields: [benchmarkForId], references: [id])
  benchmarks       Merchant[]     @relation("BenchmarkRelation")  // 作为商家时,关联的对标账号
}

enum MerchantStatus {
  SIGNED        // 已签约商家
  BENCHMARK     // 对标账号
}
```

#### 方案B: 独立BenchmarkAccount表

**优点**:
- ✅ 数据结构清晰分离
- ✅ 各自字段独立,不互相干扰

**缺点**:
- ❌ 数据结构高度重复(90%字段相同)
- ❌ 代码重复度高(需要两套CRUD逻辑)
- ❌ 转化流程复杂(需要数据迁移)
- ❌ 查询和统计不便

**不推荐理由**: 违反DRY原则,增加维护成本

---

### 推荐方案: 方案A的详细设计

#### 修改Merchant Model

```prisma
model Merchant {
  id                String   @id @default(cuid())
  name              String

  // 业务类型字段
  status            MerchantStatus @default(SIGNED)
  businessType      String?         // B2B/B2C/B2B2C
  category          Category?       @relation(fields: [categoryId], references: [id])
  categoryId        String?
  location          String?

  // 数据字段(对两种类型都适用)
  totalContentCount Int      @default(0)
  totalDiggCount    Int      @default(0)
  totalCommentCount Int      @default(0)
  totalShareCount   Int      @default(0)
  totalCollectCount Int      @default(0)

  // 对标账号专用字段
  benchmarkNotes    String?         // 对标备注(为什么选这个账号)
  followUpStatus    FollowUpStatus? // 跟进状态
  potentialValue    Int?            // 潜在价值评分(1-10)

  // 关联关系
  benchmarkForId    String?
  benchmarkFor      Merchant?  @relation("BenchmarkRelation", fields: [benchmarkForId], references: [id], onDelete: SetNull)
  benchmarks        Merchant[] @relation("BenchmarkRelation")

  // 其他关联
  profile           MerchantProfile?
  contents          MerchantContent[]

  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@index([status])
  @@index([benchmarkForId])
  @@index([status, categoryId])
  @@map("merchants")
}

enum MerchantStatus {
  SIGNED        // 已签约商家
  BENCHMARK     // 对标账号
}

enum FollowUpStatus {
  WATCHING      // 观察中
  CONTACTING    // 洽谈中
  DROPPED       // 已放弃
  CONVERTED     // 已转化(转为SIGNED)
}
```

#### MerchantProfile的适配

**问题**: 对标账号也需要创作档案吗?

**答案**: 需要,但有所简化

```prisma
model MerchantProfile {
  // ... 现有字段保持不变

  // 对标账号的档案可以使用所有AI字段
  // 但custom*字段对对标账号意义不大(可选)
}
```

**设计决策**:
- ✅ 对标账号可以生成完整的AI档案(13个AI字段)
- ⚠️ 对标账号的custom字段通常为空(因为没有内部信息)
- ✅ 允许用户为对标账号添加benchmarkNotes字段记录研究心得

---

## 五、API设计

### 5.1 对标账号管理API

#### GET /api/merchants?status=BENCHMARK
**功能**: 获取对标账号列表

**查询参数**:
- `status=BENCHMARK` - 筛选对标账号
- `benchmarkForId=xxx` - 获取某商家的对标账号
- `category=xxx` - 按分类筛选
- `page`, `limit` - 分页

**响应**:
```typescript
{
  success: true,
  data: {
    merchants: Merchant[],
    pagination: { page, limit, total }
  }
}
```

#### POST /api/merchants (修改)
**功能**: 创建商家或对标账号

**请求体**:
```typescript
{
  name: string,
  status: 'SIGNED' | 'BENCHMARK',  // 新增
  benchmarkForId?: string,          // 新增(关联商家)
  benchmarkNotes?: string,          // 新增(对标备注)
  // ... 其他字段
}
```

#### PATCH /api/merchants/[id]/convert
**功能**: 将对标账号转为已签约商家

**请求体**:
```typescript
{
  status: 'SIGNED'
}
```

**处理逻辑**:
1. 验证当前status为BENCHMARK
2. 修改status为SIGNED
3. 更新followUpStatus为CONVERTED
4. 可选: 清空benchmarkForId(解除关联)

### 5.2 关联管理API

#### POST /api/merchants/[id]/benchmarks
**功能**: 为商家添加对标账号关联

**请求体**:
```typescript
{
  benchmarkIds: string[]  // 对标账号ID数组
}
```

**处理逻辑**:
1. 验证商家存在且status=SIGNED
2. 验证所有benchmarkIds都是status=BENCHMARK
3. 批量更新benchmark的benchmarkForId字段

#### DELETE /api/merchants/[id]/benchmarks/[benchmarkId]
**功能**: 解除对标账号关联

### 5.3 对比分析API

#### GET /api/merchants/[id]/compare?benchmarkIds=xxx,yyy
**功能**: 对比商家与对标账号的数据

**响应**:
```typescript
{
  success: true,
  data: {
    merchant: {
      id, name,
      totalContentCount,
      totalDiggCount,
      avgDiggPerContent,
      // ...
    },
    benchmarks: [
      {
        id, name,
        totalContentCount,
        totalDiggCount,
        avgDiggPerContent,
        // ...
      }
    ],
    comparison: {
      contentCountDiff: "+15%",
      diggCountDiff: "-30%",
      // ...
    }
  }
}
```

---

## 六、前端UI设计

### 6.1 商家列表页优化

**当前**: 只显示已签约商家

**改进**: 添加Tab切换
```
┌─────────────────────────────────────┐
│ [已签约商家] [对标账号] [全部]        │
├─────────────────────────────────────┤
│ 🔍 搜索  📁 分类筛选  ➕ 添加       │
├─────────────────────────────────────┤
│ [商家卡片1] [商家卡片2] ...         │
└─────────────────────────────────────┘
```

**对标账号卡片差异**:
- 显示"对标"徽章
- 显示关联的商家名称
- 显示跟进状态标签
- 操作按钮: 查看档案 | 转为商家 | 删除

### 6.2 商家详情页优化

**新增"关联对标账号"区块**:
```
┌─────────────────────────────────────┐
│ 商家基本信息                         │
├─────────────────────────────────────┤
│ 创作档案(AI生成 + 用户补充)          │
├─────────────────────────────────────┤
│ 📊 关联对标账号 (3个)                │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐│
│ │对标账号1│ │对标账号2│ │对标账号3││
│ └─────────┘ └─────────┘ └─────────┘│
│ [+ 添加对标账号] [对比分析]          │
└─────────────────────────────────────┘
```

### 6.3 对标账号详情页

**简化版商家详情页**:
```
┌─────────────────────────────────────┐
│ 对标账号信息                         │
│ 📛 对标账号徽章                      │
│ 关联商家: [商家A链接]                │
│ 跟进状态: [观察中▼]                  │
│ 对标备注: [可编辑文本框]             │
├─────────────────────────────────────┤
│ 创作档案(仅AI生成部分)               │
│ - 商家Brief                          │
│ - 爆款分析                           │
│ - 创作指南                           │
├─────────────────────────────────────┤
│ 内容列表(TOP爆款)                    │
├─────────────────────────────────────┤
│ 操作按钮:                            │
│ [🔄 刷新档案] [↗️ 转为商家] [🗑️ 删除]│
└─────────────────────────────────────┘
```

### 6.4 对比分析页面(新增)

**路径**: `/merchants/[id]/compare`

```
┌─────────────────────────────────────┐
│ 对比分析: 商家A vs 对标账号B,C       │
├─────────────────────────────────────┤
│ 📊 数据对比表格                      │
│ ┌───────┬────────┬────────┬────────┐│
│ │ 指标  │ 商家A  │ 对标B  │ 对标C  ││
│ ├───────┼────────┼────────┼────────┤│
│ │内容数 │ 120    │ 200↑   │ 150↑   ││
│ │总点赞 │ 50K    │ 120K↑  │ 80K↑   ││
│ │平均赞 │ 417    │ 600↑   │ 533↑   ││
│ └───────┴────────┴────────┴────────┘│
├─────────────────────────────────────┤
│ 📈 趋势图表                          │
│ [折线图: 最近30天点赞趋势]           │
├─────────────────────────────────────┤
│ 💡 分析洞察(AI生成)                  │
│ - 对标B的内容发布频率高2倍           │
│ - 对标C的黄金3秒开头效果更好         │
│ - 建议: 提高发布频率,优化开头设计    │
└─────────────────────────────────────┘
```

---

## 七、核心组件清单

### 新增组件

#### 对标账号管理
```
components/merchants/
├── benchmark-badge.tsx              # 对标账号徽章
├── benchmark-list.tsx               # 对标账号列表
├── benchmark-card.tsx               # 对标账号卡片
├── benchmark-detail.tsx             # 对标账号详情(简化版)
├── follow-up-status-select.tsx      # 跟进状态选择器
└── convert-to-merchant-dialog.tsx   # 转为商家对话框
```

#### 关联管理
```
components/merchants/
├── merchant-benchmarks-section.tsx  # 商家的关联对标账号区块
├── add-benchmark-dialog.tsx         # 添加对标账号对话框
└── benchmark-relation-card.tsx      # 关联对标账号卡片
```

#### 对比分析
```
components/merchants/comparison/
├── comparison-page.tsx              # 对比分析页面
├── comparison-table.tsx             # 数据对比表格
├── comparison-chart.tsx             # 对比趋势图表
└── comparison-insights.tsx          # AI分析洞察
```

### 修改组件

```
components/merchants/
├── merchant-list.tsx                # 添加status筛选
├── merchant-card.tsx                # 根据status显示不同样式
└── merchant-profile-card.tsx        # 对标账号简化显示
```

---

## 八、实施优先级和阶段

### MVP阶段(P0功能)

**目标**: 基础的对标账号管理功能

**包含功能**:
1. ✅ 数据库设计和迁移(添加status、benchmarkForId等字段)
2. ✅ 添加对标账号(手动创建)
3. ✅ 查看对标账号列表
4. ✅ 对标账号详情页(简化版)
5. ✅ 删除对标账号
6. ✅ 关联对标账号到商家
7. ✅ 为对标账号生成AI档案
8. ✅ 在商家详情页显示关联的对标账号

**不包含**:
- ❌ 对比分析功能
- ❌ 转为商家功能
- ❌ 跟进状态管理
- ❌ 批量操作

**时间估算**: 6-8小时

---

### 增强阶段(P1功能)

**目标**: 完善对标账号的使用价值

**包含功能**:
1. ✅ 对比分析功能(表格+图表)
2. ✅ 转为商家功能
3. ✅ 跟进状态管理
4. ✅ 对标备注功能
5. ✅ 批量关联对标账号

**时间估算**: 8-10小时

---

### 高级阶段(P2功能)

**目标**: AI驱动的深度分析

**包含功能**:
1. ✅ AI对比分析洞察
2. ✅ 批量分析多个对标账号
3. ✅ 行业趋势分析
4. ✅ 对标账号推荐(基于相似度)
5. ✅ 定时追踪和报告

**时间估算**: 12-15小时

---

## 九、关键设计决策

### 决策1: 统一数据模型 vs 独立表

**选择**: 统一数据模型(Merchant表)

**理由**:
- 数据结构90%相同,避免重复
- 代码复用度高
- 转化流程简单
- 遵循DRY原则

---

### 决策2: 对标账号是否需要完整档案

**选择**: 需要AI档案,但简化用户字段

**理由**:
- AI档案是对标账号的核心价值
- 用户字段对对标账号意义不大(没有内部信息)
- 可以用benchmarkNotes字段替代

---

### 决策3: 关联关系的方向

**选择**: 对标账号关联到商家(benchmarkForId)

**理由**:
- 一个对标账号通常只关联一个商家
- 一个商家可以有多个对标账号
- 查询方便: `merchant.benchmarks`

---

### 决策4: MVP功能范围

**选择**: 基础CRUD + 关联 + AI档案

**理由**:
- 满足核心使用场景(竞品研究、创作参考)
- 可快速上线验证需求
- 为后续高级功能打好基础

---

## 十、潜在风险和缓解

### 风险1: 数据混淆

**问题**: 对标账号和已签约商家混在一起,用户难以区分

**缓解**:
- UI上明确区分(徽章、颜色、图标)
- 默认列表分开展示(Tab切换)
- API默认只返回SIGNED,需显式传status=BENCHMARK

---

### 风险2: 关联关系复杂

**问题**: 对标账号可能关联多个商家,导致关系混乱

**缓解**:
- MVP阶段限制: 一个对标账号只能关联一个商家
- 通过benchmarkForId字段强制单一关联
- 后续如有需求,可改为多对多关系表

---

### 风险3: 功能膨胀

**问题**: 对标账号功能可能无限扩展,导致开发周期失控

**缓解**:
- 严格遵循MVP优先级
- 每个阶段验证用户需求后再继续
- 拒绝非核心功能(如自动采集、实时监控等)

---

## 十一、成功指标

**MVP阶段完成标准**:

- [ ] 可以添加对标账号(手动输入基本信息)
- [ ] 可以查看对标账号列表(独立Tab)
- [ ] 可以为对标账号生成AI档案
- [ ] 可以将对标账号关联到商家
- [ ] 可以在商家详情页查看关联的对标账号
- [ ] UI上明确区分对标账号和已签约商家
- [ ] 删除对标账号时正确处理关联关系

**用户价值验证**:

- [ ] 至少3个真实对标账号被添加
- [ ] 至少1个商家关联了对标账号
- [ ] 对标账号的AI档案被用于创作参考
- [ ] 用户反馈对标账号功能有价值

---

## 十二、下一步行动

### 立即行动

1. **确认需求**: 与用户确认以上调研是否符合预期
2. **确定优先级**: 确认从MVP阶段开始实施
3. **数据库设计**: 确认Merchant表的修改方案
4. **开始编码**: 按Phase 1-5的顺序实施

### 待确认问题

1. **Q**: 对标账号的数据来源是手动输入还是自动采集？
   **A**: MVP阶段建议手动输入,复用现有的导入脚本

2. **Q**: 对标账号是否需要权限控制(谁能查看)？
   **A**: MVP阶段建议仅ADMIN可管理,所有登录用户可查看

3. **Q**: 关联关系是否需要多对多(一个对标关联多个商家)？
   **A**: MVP阶段建议一对多(简化实现),后续可扩展

---

**文档版本**: v1.0
**创建时间**: 2025-11-05
**下一步**: 等待用户确认后编写《对标账号功能实施方案》
